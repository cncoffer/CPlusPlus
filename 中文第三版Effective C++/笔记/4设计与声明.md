### 6-20 ###

### 条款18 让接口容易被正确使用 ###

理想情况下, 如果用户企图使用某个接口而却没有得到他所预期的行为, 这个代码就不该通过编译.

比如为了防止函数入参错误, 可以增加自定义类, 然后传参通过自定义类来传递, 这样就能在编译时保证参数不会出现错位/取值范围不对等问题.

任何接口如果要求客户"比如保证得做某些事情", 就有着"不正确使用"的倾向, 因为客户可能会忘记.
比如函数返回一个资源, 然后要求客户记得释放, 那就至少开启了两个错误机会: 没有释放, 释放同一指针超过一次.
针对上面这个例子, 返回的资源直接用智能指针包起来可以解决问题.

tr1:shared_ptr支持定制型删除器, 比如对于锁, 可以实现不用时自动unlock.
shared_ptr还能防范"cross-DLL problem". 这一问题发生于"对象在DLL中被new创建, 却在另一个DLL中被delete销毁". 在许多平台上跨DLL的new/delete会导致运行期错误. 而shared_ptr在初始化时, 就将delete需要调用的函数保存起来了.

###  ###